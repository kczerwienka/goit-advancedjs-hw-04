{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["//Â Described in the documentation\nimport SimpleLightbox from 'simplelightbox';\n// Optional import of styles\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nvar galleryy = new SimpleLightbox('#gallery a', { captionDelay: 250 });\n\nexport function renderPhotos(\n  url,\n  previewURL,\n  tag = 'dupa',\n  likes = '0',\n  views = '0',\n  comments = '0',\n  downloads = '0',\n  i\n) {\n  // Clears gallery gallery\n  const gallery = document.querySelector('#gallery');\n\n  // Adds an line then adds it to gallery\n\n  const li = document.createElement('li');\n  li.className = 'gallery-item';\n  gallery.append(li);\n\n  // Adds an link then adds it to line\n  const a = document.createElement('a');\n  a.className = 'gallery-link';\n  a.href = url;\n  li.append(a);\n\n  // Adds an image then adds it to link\n  const image = document.createElement('img');\n  image.className = 'gallery-image';\n  image.src = previewURL;\n  image.title = tag;\n  a.append(image);\n\n  // Adds a div then adds it to line\n  const div = document.createElement('div');\n  div.className = 'info';\n  li.append(div);\n\n  const divLikes = document.createElement('div');\n  const divViews = document.createElement('div');\n  const divComments = document.createElement('div');\n  const divDownloads = document.createElement('div');\n\n  const h3Likes = document.createElement('h3');\n  const h3Views = document.createElement('h3');\n  const h3Comments = document.createElement('h3');\n  const h3Downloads = document.createElement('h3');\n\n  h3Likes.textContent = 'Likes';\n  h3Views.textContent = 'Views';\n  h3Comments.textContent = 'Comments';\n  h3Downloads.textContent = 'Downloads';\n\n  const pLikes = document.createElement('p');\n  const pViews = document.createElement('p');\n  const pComments = document.createElement('p');\n  const pDownloads = document.createElement('p');\n\n  pLikes.textContent = likes;\n  pViews.textContent = views;\n  pComments.textContent = comments;\n  pDownloads.textContent = downloads;\n\n  div.append(divLikes, divViews, divComments, divDownloads);\n\n  divLikes.append(h3Likes, pLikes);\n  divViews.append(h3Views, pViews);\n  divComments.append(h3Comments, pComments);\n  divDownloads.append(h3Downloads, pDownloads);\n\n  galleryy.refresh();\n}\n\nexport function clearGallery() {\n  // Clears gallery gallery\n  const gallery = document.querySelector('#gallery');\n\n  while (gallery.firstChild) {\n    gallery.removeChild(gallery.lastChild);\n  }\n}\n","// Described in the documentation\nimport iziToast from 'izitoast';\n// Optional import of styles\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { renderPhotos, clearGallery } from './render-functions.js';\n\nimport axios from 'axios';\n\nvar API_KEY = '47376754-ed05d64ddcb60a2a475f4c9e7';\nconst searchButton = document.querySelector('.start-button');\nconst moreButton = document.querySelector('.more-button');\nconst loader = document.querySelector('.loader');\nconst moreLoader = document.querySelector('.loader-more');\nconst endLoader = document.querySelector('.loader-end');\n\nasync function fetchUsers(q, i, image_type, orientation, safesearch) {\n  const response = await axios.get(\n    'https://pixabay.com/api/?key=' +\n      API_KEY +\n      '&q=' +\n      encodeURIComponent(q) +\n      '&image_type=' +\n      encodeURIComponent(image_type) +\n      '&orientation=' +\n      encodeURIComponent(orientation) +\n      '&safesearch=' +\n      encodeURIComponent(safesearch) +\n      '&page=' +\n      encodeURIComponent(i) +\n      '&per_page=' +\n      encodeURIComponent(15)\n  );\n  return response.data;\n}\n\nexport async function fetchFunction(\n  q,\n  i,\n  image_type = 'photo',\n  orientation = 'horizontal',\n  safesearch = true\n) {\n  if (i == 1) {\n    loader.style.display = 'inline-block';\n  } else {\n    moreLoader.style.display = 'block';\n    moreButton.style.display = 'none';\n  }\n\n  try {\n    const data = await fetchUsers(q, i, image_type, orientation, safesearch);\n    console.log(data);\n\n    if (i >= data.totalHits / 15) {\n      moreButton.style.display = 'none';\n      endLoader.style.display = 'block';\n    } else {\n      moreButton.style.display = 'block';\n      endLoader.style.display = 'none';\n    }\n\n    if (data.totalHits > 0) {\n      // console.log(data.hits);\n      if (i == 1) {\n        clearGallery();\n      }\n\n      data.hits.forEach(element => {\n        // console.log(\n        //   element.largeImageURL,\n        //   element.previewURL,\n        //   element.tags,\n        //   element.likes,\n        //   element.views,\n        //   element.comments,\n        //   element.downloads\n        // );\n        renderPhotos(\n          element.largeImageURL,\n          element.previewURL,\n          element.tags,\n          element.likes,\n          element.views,\n          element.comments,\n          element.downloads,\n          i\n        );\n      });\n    } else {\n      iziToast.error({\n        title: 'Error',\n        message: 'No results for this search',\n        position: 'topRight',\n      });\n    }\n    // console.log('xd');\n    searchButton.disabled = false;\n    loader.style.display = 'none';\n    moreLoader.style.display = 'none';\n    moreButton.style.display = 'block';\n\n    if (i > 1) {\n      const item = document.querySelector('.gallery-item');\n      const params = item.getBoundingClientRect();\n      window.scrollBy(0, params.height * 2 + 64);\n    }\n  } catch (error) {\n    // Error handling\n  }\n}\n","// Described in the documentation\nimport iziToast from 'izitoast';\n// Optional import of styles\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { fetchFunction } from './js/pixabay-api.js';\n\nconst searchButton = document.querySelector('button');\nconst inputBar = document.querySelector('input');\nconst moreButton = document.querySelector('.more-button');\nconst moreLoader = document.querySelector('.loader-more');\nconst endLoader = document.querySelector('.loader-end');\n\nmoreButton.style.display = 'none';\nmoreLoader.style.display = 'none';\nendLoader.style.display = 'none';\nlet moreValue = '';\n\nlet i = 1;\n\nsearchButton.addEventListener('click', event => {\n  searchButton.disabled = true;\n  if (!inputBar.value) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter search value',\n      position: 'topRight',\n    });\n  } else {\n    i = 1;\n    moreValue = inputBar.value;\n    fetchFunction(inputBar.value, i);\n    moreButton.style.display = 'block';\n  }\n});\n\nmoreButton.addEventListener('click', event => {\n  i++;\n  fetchFunction(moreValue, i);\n});\n"],"names":["galleryy","SimpleLightbox","renderPhotos","url","previewURL","tag","likes","views","comments","downloads","i","gallery","li","image","div","divLikes","divViews","divComments","divDownloads","h3Likes","h3Views","h3Comments","h3Downloads","pLikes","pViews","pComments","pDownloads","clearGallery","API_KEY","searchButton","moreButton","loader","moreLoader","endLoader","fetchUsers","q","image_type","orientation","safesearch","axios","fetchFunction","data","element","iziToast","params","inputBar","moreValue","event"],"mappings":"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"}